<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Meeting Simulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        #chat-box {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        #messages {
            list-style-type: none;
            padding: 0;
            height: 400px;
            overflow-y: scroll;
            border-bottom: 1px solid #ddd;
            margin-bottom: 10px;
        }
        #messages li {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }
        .client {
            background-color: #e0f7fa;
            text-align: left;
        }
        .salesman {
            background-color: #fff9c4;
            text-align: right;
        }
        #input-box {
            display: flex;
        }
        #input-box input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            margin-right: 10px;
        }
        #input-box button {
            padding: 10px 20px;
            border: none;
            background-color: #0288d1;
            color: #fff;
            border-radius: 5px;
            cursor: pointer;
        }
        #input-box button:hover {
            background-color: #0277bd;
        }
    </style>
</head>
<body>
    <div id="chat-box">
        <ul id="messages"></ul>
        <div id="input-box">
            <input type="text" id="user-input" placeholder="Type your message here...">
            <button onclick="sendMessage()">Send</button>
        </div>
    </div>

    <script>
        const apiKey = "AIzaSyCjCTUupbc55S477Cr0Eb78H8ETz2pe4_U";

        function sendMessage() {
            const userInput = document.getElementById('user-input').value;
            if (!userInput) return;

            const messages = document.getElementById('messages');
            const newMessage = document.createElement('li');
            newMessage.className = 'salesman';
            newMessage.textContent = userInput;
            messages.appendChild(newMessage);
            document.getElementById('user-input').value = '';

            fetchResponse(userInput);
        }

        function fetchResponse(userMessage) {
            const prompt = `
            You are a Moroccan business owner participating in a business meeting simulation to practice negotiation skills with salesmen. 
            As the AI playing the role of a business client, your objective is to create a challenging scenario where you define the name of 
            your company, the industry it belongs to, and the product you are looking to purchase according to the industry and needs of 
            your company. Your aim is to present logical and strong arguments against the product and its price, always expressed in dirhams. 
            Throughout the conversation, it is crucial to stay in character and adopt a strict tone if the salesman tries to divert the 
            discussion or introduce unrelated subjects, remind them that such behavior is inappropriate for a business meeting and reflects 
            poorly on their professionalism and the company they represent. In your first message, provide the context for the simulation 
            and immerse yourself in the role without revealing that it is a simulation or that you are an AI. Avoid defining yourself as an 
            AI and discourage the salesman from doing so as well. If the salesman suggests unreasonably low prices, or unreasonable products 
            be suspicious of their offer. Remember, you should respond as if you were in a verbal discussion, not a written one. 
            Do not include email-like messages with greetings, body, closing, and signature. And try to favor short and relevant messages.
            
            Client: ${userMessage}
            `;

            fetch('https://gemini.api.com/v1/chat', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${apiKey}`
                },
                body: JSON.stringify({ prompt: prompt })
            })
            .then(response => response.json())
            .then(data => {
                const messages = document.getElementById('messages');
                const newMessage = document.createElement('li');
                newMessage.className = 'client';
                newMessage.textContent = data.response;
                messages.appendChild(newMessage);
                messages.scrollTop = messages.scrollHeight;
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }
    </script>
</body>
</html>
